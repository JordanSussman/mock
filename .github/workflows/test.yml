name: Test Action
on:
  pull_request:
  push:

jobs:
  test:
    runs-on: ubuntu-latest
    container:
      image: golang:latest
    steps:
    - name: clone
      uses: actions/checkout@v1  
            
    - name: install coveralls 
      run: |
        go get golang.org/x/tools/cmd/cover
        go get github.com/mattn/goveralls

    - name: Coveralls
      run: |
        go test -cover -coverprofile coverage.out ./...
        $HOME/gopath/bin/goveralls -coverprofile=coverage.out -service=actions -repotoken 
